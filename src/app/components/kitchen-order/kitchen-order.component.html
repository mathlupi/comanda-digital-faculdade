<div class="container mx-auto p-4">
  <!-- Abas -->
  <div class="flex border-b mb-4">
    <button
      class="px-4 py-2"
      [ngClass]="activeTab === 'pending' ? 'tab-active' : 'tab-inactive'"
      (click)="setActiveTab('pending')"
    >
      Pendentes
    </button>
    <button
      class="px-4 py-2"
      [ngClass]="activeTab === 'inProduction' ? 'tab-active' : 'tab-inactive'"
      (click)="setActiveTab('inProduction')"
    >
      Em produção
    </button>
    <button
      class="px-4 py-2"
      [ngClass]="activeTab === 'ready' ? 'tab-active' : 'tab-inactive'"
      (click)="setActiveTab('ready')"
    >
      Prontos
    </button>
    <button
      class="px-4 py-2"
      [ngClass]="activeTab === 'canceled' ? 'tab-active' : 'tab-inactive'"
      (click)="setActiveTab('canceled')"
    >
      Cancelados
    </button>
  </div>

  <!-- Pendentes -->
  <div *ngIf="activeTab === 'pending'">
    <h2 class="text-2xl font-bold mb-4 text-maroon-700">Pedidos pendentes</h2>
    <div *ngIf="orders.length === 0" class="text-gray-500">
      Nenhum pedido pendente.
    </div>

    <div
      *ngFor="let order of orders; trackBy: trackByOrder"
      class="border p-4 mb-2 rounded shadow bg-white"
    >
      <p class="font-semibold">Pedido ID: {{ order.id }}</p>
      <p>Cliente: {{ order.customerName }}</p>
      <p>Endereço: {{ order.customerAddress }}</p>
      <p>Total: R$ {{ order.totalPrice.toFixed(2) }}</p>

      <!-- ITENS DO PEDIDO -->
      <div class="mt-3">
        <p class="font-semibold mb-1">Itens:</p>
        <ul class="list-disc ml-5 space-y-1">
          <li *ngFor="let it of order.items; trackBy: trackByItem">
            <div class="flex flex-col">
              <span>
                <strong>{{ it.quantity }}×</strong> {{ it.dish.name }}
                <span
                  *ngIf="it.customized"
                  class="ml-1 text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 align-middle"
                >
                  personalizado
                </span>
              </span>
              <small class="text-gray-600" *ngIf="it.ingredients?.length">
                Ingredientes: {{ it.ingredients.join(", ") }}
              </small>
            </div>
          </li>
        </ul>
      </div>

      <div class="mt-3">
        <button
          class="btn-maroon mr-2"
          (click)="setStatus(order.id!, 'Em produção')"
        >
          Iniciar produção
        </button>
        <button
          class="btn-maroon bg-red-700"
          (click)="setStatus(order.id!, 'Cancelado')"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Em Produção -->
  <div *ngIf="activeTab === 'inProduction'">
    <h2 class="text-2xl font-bold mb-4 text-maroon-700">Pedidos em produção</h2>
    <div *ngIf="inProduction.length === 0" class="text-gray-500">
      Nenhum pedido em produção.
    </div>

    <div
      *ngFor="let order of inProduction; trackBy: trackByOrder"
      class="border p-4 mb-2 rounded shadow bg-white"
    >
      <p class="font-semibold">Pedido ID: {{ order.id }}</p>
      <p>Cliente: {{ order.customerName }}</p>
      <p>Endereço: {{ order.customerAddress }}</p>
      <p>Total: R$ {{ order.totalPrice.toFixed(2) }}</p>

      <!-- ITENS DO PEDIDO -->
      <div class="mt-3">
        <p class="font-semibold mb-1">Itens:</p>
        <ul class="list-disc ml-5 space-y-1">
          <li *ngFor="let it of order.items; trackBy: trackByItem">
            <div class="flex flex-col">
              <span>
                <strong>{{ it.quantity }}×</strong> {{ it.dish.name }}
                <span
                  *ngIf="it.customized"
                  class="ml-1 text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 align-middle"
                >
                  personalizado
                </span>
              </span>
              <small class="text-gray-600" *ngIf="it.ingredients?.length">
                Ingredientes: {{ it.ingredients.join(", ") }}
              </small>
            </div>
          </li>
        </ul>
      </div>

      <div class="mt-3">
        <button
          class="btn-maroon mr-2"
          (click)="setStatus(order.id!, 'Pronto')"
        >
          Marcar como pronto
        </button>
        <button
          class="btn-maroon bg-red-700"
          (click)="setStatus(order.id!, 'Cancelado')"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Prontos -->
  <div *ngIf="activeTab === 'ready'">
    <h2 class="text-2xl font-bold mb-4 text-maroon-700">Pedidos prontos</h2>
    <div *ngIf="ready.length === 0" class="text-gray-500">
      Nenhum pedido pronto.
    </div>

    <div
      *ngFor="let order of ready; trackBy: trackByOrder"
      class="border p-4 mb-2 rounded shadow bg-white"
    >
      <p class="font-semibold">Pedido ID: {{ order.id }}</p>
      <p>Cliente: {{ order.customerName }}</p>
      <p>Endereço: {{ order.customerAddress }}</p>
      <p>Total: R$ {{ order.totalPrice.toFixed(2) }}</p>

      <!-- ITENS DO PEDIDO -->
      <div class="mt-3">
        <p class="font-semibold mb-1">Itens:</p>
        <ul class="list-disc ml-5 space-y-1">
          <li *ngFor="let it of order.items; trackBy: trackByItem">
            <div class="flex flex-col">
              <span>
                <strong>{{ it.quantity }}×</strong> {{ it.dish.name }}
                <span
                  *ngIf="it.customized"
                  class="ml-1 text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 align-middle"
                >
                  personalizado
                </span>
              </span>
              <small class="text-gray-600" *ngIf="it.ingredients?.length">
                Ingredientes: {{ it.ingredients.join(", ") }}
              </small>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Cancelados -->
  <div *ngIf="activeTab === 'canceled'">
    <h2 class="text-2xl font-bold mb-4 text-maroon-700">Pedidos cancelados</h2>
    <div *ngIf="canceled.length === 0" class="text-gray-500">
      Nenhum pedido cancelado.
    </div>

    <div
      *ngFor="let order of canceled; trackBy: trackByOrder"
      class="border p-4 mb-2 rounded shadow bg-white"
    >
      <p class="font-semibold">Pedido ID: {{ order.id }}</p>
      <p>Cliente: {{ order.customerName }}</p>
      <p>Endereço: {{ order.customerAddress }}</p>
      <p>Total: R$ {{ order.totalPrice.toFixed(2) }}</p>

      <!-- ITENS DO PEDIDO -->
      <div class="mt-3">
        <p class="font-semibold mb-1">Itens:</p>
        <ul class="list-disc ml-5 space-y-1">
          <li *ngFor="let it of order.items; trackBy: trackByItem">
            <div class="flex flex-col">
              <span>
                <strong>{{ it.quantity }}×</strong> {{ it.dish.name }}
                <span
                  *ngIf="it.customized"
                  class="ml-1 text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 align-middle"
                >
                  personalizado
                </span>
              </span>
              <small class="text-gray-600" *ngIf="it.ingredients?.length">
                Ingredientes: {{ it.ingredients.join(", ") }}
              </small>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
